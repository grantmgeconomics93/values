---
title: "Untitled"
output: html_document
date: "2023-10-17"
---
```{r}
library(haven)
 wave1 <- read_dta("~/git/values/WV1_Data_stata_v20200208.dta")
 wave2<- read_dta("~/git/values/WV2_Data_Stata_v20180912.dta")
 wave3= read_dta("~/git/values/WV3_Data_Stata_v20180912.dta")
 wave4=read_dta("~/git/values/WV4_Data_stata_v20201117.dta")

 
```
```{r}
library(dplyr)

wave1select <- wave1 %>%
  rename(
    "religious denomination" = V179,
    "Self positioning in political scale" =V123,
    "age" = V216,
    "Employment status" = V220,
    "sex" = V214
  ) %>%
  select("religious denomination", "Self positioning in political scale", "age", "Employment status", "sex")

wave2select <- wave2 %>%
  rename(
    "religious denomination" = V144,
    "Self positioning in political scale" = V248,
    "sex" = V353,
    "employment" = V358,
    "age" = V355
  ) %>%
  select("religious denomination", "Self positioning in political scale", "age", "employment", "sex")

wave3select <- wave3 %>%
  rename(
    "religious denomination" = V179,
    "Self positioning in political scale" = V123,
    "age" = V216,
    "sex" = V214,
    "employment" = V220
  ) %>%
  select("religious denomination", "Self positioning in political scale", "age", "employment", "sex")

wave4select <- wave4 %>%
  rename(
    "religious denomination" = V184G,
    "Self positioning in political scale" =V139,
    "age" = V225,
    "sex" = V223,
    "employment" = V229
  ) %>%
  select("religious denomination", "Self positioning in political scale", "age", "employment", "sex")

# Step 2: Add a 'Year' column to each data frame
wave1select$Year <- 1980
wave3select$Year <- 1990
wave3select$Year <- 1995
wave3select$Year <- 1999
```



```{r}
wave2select <- wave2select %>%
  mutate("religious denomination" = case_when(
    "religious denomination" == 0  ~ 0,
    "religious denomination" == 64 ~ 1,
    "religious denomination" == 62 ~ 2,
    "religious denomination" == 49 ~ 3,
    "religious denomination" == 42 ~ 4,
    "religious denomination" == 43 ~ 5,
    "religious denomination" == 28 ~ 6,
    "religious denomination" == 12 ~ 7,
    "religious denomination" == 53 ~ 8,  # and possibly other categories as 'Other'
    "religious denomination" == -2 ~ -2,
    "religious denomination" == -4 ~ -4,
    "religious denomination" == -5 ~ -5,
    TRUE ~ NA_integer_  # to discard other categories not listed
  ))



```
```{r}
wave3select <- wave3select %>%
  mutate("religious denomination" = case_when(
    "religious denomination" == 96 ~ 0,
    "religious denomination" == 1  ~ 1,
    "religious denomination" == 2  ~ 2,
    "religious denomination" == 3  ~ 3,
    "religious denomination" == 4  ~ 4,
    "religious denomination" == 5  ~ 5,
    "religious denomination" == 6  ~ 6,
    "religious denomination" == 7  ~ 7,
    "religious denomination" == 80 ~ 8,  # and possibly other categories as 'Other'
    "religious denomination" == 99 ~ -2,
    "religious denomination" == 100 ~ -4,
    "religious denomination" == 98 ~ -5,
    TRUE ~ NA_integer_  # to discard other categories not listed
  ))



```
```{r}
wave4select <- wave4select %>%
  mutate("religious denomination" = case_when(
    "religious denomination" == 0  ~ 0,
    "religious denomination" == 64 ~ 1,
    "religious denomination" == 61 ~ 2,
    "religious denomination" == 52 ~ 3,
    "religious denomination" == 42 ~ 4,
    "religious denomination" == 49 ~ 5,
    "religious denomination" == 31 ~ 6,
    "religious denomination" == 12 ~ 7,
    "religious denomination" == 53 ~ 8,  # and possibly other categories as 'Other'
    "religious denomination" == -2 ~ -2,
    "religious denomination" == -4 ~ -4,
    TRUE ~ NA_integer_  # to discard other categories not listed
  ))

```


```{r}
# Step 3: Combine the data frames
  final_df <- bind_rows(wave1select_filtered,wave2select_filtered,wave3select_filtered,wave4select_filtered)

# Display the final data frame
print("final_df:")
print(final_df)

```


